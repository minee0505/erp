# [TIL] 2026-02-04

## ERP 개발 환경 트러블슈팅: DB 컨텍스트 및 사업단위 개체 매핑

## 1. 저장 프로시저 호출 오류 (DB 컨텍스트 선택 실수)

### 문제 상황

* 프로시저를 생성했음에도 화면에서 "찾을 수 없습니다"라는 에러가 반복됨.

### 원인 분석

* **Target DB 오지정**: 실제 개발 환경인 **`BNIDevA`**가 아니라, 교육용인 **`BNIEdu`** 데이터베이스에 쿼리를 실행함.
* **환경 불일치**: 화면(UI)은 `BNIDevA`를 바라보고 있는데, 프로시저는 `BNIEdu`에만 존재하여 호출 경로가 완전히 차단됨.

### 해결 및 배운 점

* **실행 전 DB 확인**: 쿼리 실행 전 SSMS 상단에서 현재 연결된 DB가 `BNIDevA`가 맞는지 반드시 확인해야 함.
* **환경 구분**: 여러 DB가 있는 개발 환경에서는 객체 생성 위치가 조금만 어긋나도 시스템이 동작하지 않는다는 기본 원칙을 체감함.

---

## 2. 헬프코드 개체 오류 (사업단위 vs 사업부문)

### 문제 상황

* **개체 오류**: "개체 이름 **`_TCAAccUnit`**이(가) 유효하지 않습니다." 에러 발생.

### 원인 분석

* **사업단위(BizUnit) 설정 오류**: 님이 분석한 대로, `_TCAAccUnit` 관련 에러는 **사업단위** 설정을 확인해야 하는 문제임.
* **명칭 혼선**: 사업단위로 설정해야 할 헬프코드나 개체를 사업부문(AccUnit)과 혼동하여 매핑하면서 시스템이 유효하지 않은 개체로 인식함.

### 해결 및 배운 점

* **정확한 개체 매핑**: `_TCAAccUnit` 에러가 뜰 때는 이것이 **사업단위**와 관련된 설정임을 인지하고 매핑을 바로잡아야 함.
* **필드 및 개체 대조**: 화면 디자인 툴에서 사용하는 개체 이름이 실제 DB의 사업단위/사업부문 중 어디에 해당하는지 명확히 구분하는 것이 해결의 열쇠임.

---

## 3. 오늘의 회고 (Action Plan)

* **기본부터 체크**: 에러가 나면 로직 이전에 **1) DB 선택이 맞는지 2) 사업단위 등 헬프코드 개체 매핑이 정확한지**부터 확인하자.
* **개체 이름 숙지**: `_TCAAccUnit` 같은 개체명이 어떤 업무 단위(사업단위)를 의미하는지 정확히 파악하여 매핑 실수를 줄이자.
* **실무 환경 적응**: 선배들의 `dbo` 방식과 실제 개발 환경(`BNIDevA`)의 특성을 직접 삽질하며 배워보니 ERP 구조를 더 깊게 이해하게 됨.

--- 